<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Lawrence Koh Yong Hong - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Lawrence Koh Yong Hong - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-codii"><a class="link" href="#project-codii">Project: Codii</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>[<a href="https://github.com/CS2103AUG2017-T17-B1/main">Codii</a>] is a desktop address book application specially
designed for debt collectors to manage debtors in a simple manner. It has a GUI but most of the user
interactions happen using a CLI (Command Line Interface).</p>
</div>
<div class="paragraph">
<p>Debt collectors can store information such as the amount owed, debt borrow date and debt cleared date in addition to debtorâ€™s personal information.</p>
</div>
<div class="paragraph">
<p>Unique features such as an interest calculator help debt collectors manage debts more efficiently.</p>
</div>
<div class="paragraph">
<p>Codii is evolved from [<a href="https://github.com/nus-cs2103-AY1718S1/addressbook-level4">AddressBook - Level 4</a>] which is a desktop address book application used for teaching Software Engineering principles.</p>
</div>
<div class="paragraph">
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103AUG2017-T17-B1/main/tree/master/collated/main/lawwman.md">Functional code</a>] [<a href="https://github.com/CS2103AUG2017-T17-B1/main/tree/master/collated/test/lawwman.md">Test code</a>]</p>
</div>
<div class="sect2">
<h3 id="enhancement-added-date-storing-mechanism"><a class="link" href="#enhancement-added-date-storing-mechanism">Enhancement Added: Date Storing Mechanism</a></h3>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="date-storing-mechanism"><a class="link" href="#date-storing-mechanism">Date storing mechanism</a></h3>
<div class="paragraph">
<p>The date storing mechanism only begins to work when an instance of the <code>Person</code> class is implemented. An instance of the <code>Date</code> class is created and used to store the current date that the <code>Person</code> instance was created.
An example of such an implementation of this is the <code>dateBorrow</code> field of <code>Person</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> <span class="directive">implements</span> ReadOnlyPerson {

    <span class="directive">private</span> ObjectProperty&lt;<span class="predefined-type">Name</span>&gt; name;
    <span class="directive">private</span> ObjectProperty&lt;Phone&gt; phone;
    <span class="directive">private</span> ObjectProperty&lt;Email&gt; email;
    <span class="directive">private</span> ObjectProperty&lt;Address&gt; address;
    <span class="directive">private</span> ObjectProperty&lt;PostalCode&gt; postalCode;
    <span class="directive">private</span> ObjectProperty&lt;Cluster&gt; cluster;
    <span class="directive">private</span> ObjectProperty&lt;Debt&gt; debt;
    <span class="directive">private</span> ObjectProperty&lt;Interest&gt; interest;
    <span class="directive">private</span> ObjectProperty&lt;DateBorrow&gt; dateBorrow;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Such an implementation doesn&#8217;t allow for errors when creating the field as there is no room for mistakes on the user&#8217;s side. When the <code>Person</code> instance is created, the following line is called:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="local-variable">this</span>.dateBorrow = <span class="keyword">new</span> SimpleObjectProperty&lt;&gt;(<span class="keyword">new</span> DateBorrow());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Suppose the above line is called, the <code>DateBorrow</code> class creates a new <code>Date</code> with the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> DateBorrow() {
        <span class="predefined-type">Date</span> date = <span class="keyword">new</span> <span class="predefined-type">Date</span>();
        value = formatDate(date);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This way of implementation is rather intuitive when adding a new <code>Person</code> as a new <code>Date</code> can simply be created. However, whenever a <code>Person</code> constructor is called, such as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> Person(ReadOnlyPerson source) {
        <span class="local-variable">this</span>(source.getName(), source.getPhone(), source.getEmail(), source.getAddress(), source.getPostalCode(),
                source.getDebt(), source.getInterest(), source.getDeadline(), source.getTags());</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would result in inconsistencies in the code. For example, an <code>Edit</code> command is implemented in such a way that it creates an <code>editedPerson</code>.
This is because the above mentioned constructor was meant to make a copy of the <code>Person</code> with a given source. Hence the following line was added to ensure consistency.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="local-variable">this</span>.dateBorrow = <span class="keyword">new</span> SimpleObjectProperty&lt;&gt;(source.getDateBorrow());</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>DateBorrow</code><br>
<strong>Alternative 1(current choice):</strong> Create a <code>DateBorrow</code> class as such but modify the constructor to maintain consistency<br>
<strong>Pros:</strong> Blends well with existing coding style and how the commands work.<br>
<strong>Cons:</strong> As of now there is no problems with the implementation.<br>
<strong>Alternative 2:</strong> Have the user manually key in the date<br>
<strong>Pros:</strong> Implementation is very simple as the developer could just follow current coding style to create a new field.<br>
<strong>Cons:</strong> Such an implementation would not be as user-friendly as the first alternative. Currently the amount of fields for the user to key in
is rather high. Implementing alternative 2 would be more tedious on the user&#8217;s side.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-overdue-list-command"><a class="link" href="#enhancement-added-overdue-list-command">Enhancement Added: Overdue List Command</a></h3>
<div class="sect3">
<h4 id="external-behavior"><a class="link" href="#external-behavior">External Behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listing-all-persons-with-overdue-debt-code-overduelist-code"><a class="link" href="#listing-all-persons-with-overdue-debt-code-overduelist-code">Listing all persons with overdue debt: <code>overduelist</code></a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It should be noted that each time the user logs into <code>Codii</code>, it checks through the address book for debtors
whose deadlines have been passed and automatically adds them into the overdue list.<br>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If any debtor in the overdue list has cleard his/her debt, they are removed from the overdue list.<br>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Shows a list of all persons with overdue debt in the address book.<br>
Format: <code>overduelist</code></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification"><a class="link" href="#justification">Justification</a></h4>
<div class="paragraph">
<p>It would be more convenient for debt collectors to view all the debtors with overdue debts with a simple
command.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-interest-calculator"><a class="link" href="#enhancement-added-interest-calculator">Enhancement Added: Interest calculator</a></h3>
<div class="sect3">
<h4 id="external-behavior-2"><a class="link" href="#external-behavior-2">External Behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="interest-calculator"><a class="link" href="#interest-calculator">Interest Calculator</a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is only applicable to debtors with a set interest rate. For the current version, only positive whole numbers are accepted.<br>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>Codii</code> only checks through its list of debtors when the user logs into the application.<br>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At the start of each month, <code>Codii</code> will check through the list of debtors and accrue their debt
if applicable. Even if the user has not logged into <code>Codii</code> for many months, the application will compound
the debt accordingly.</p>
</div>
<div class="paragraph">
<p>This is convenient for debts or loans with a monthly interest rate.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification-2"><a class="link" href="#justification-2">Justification</a></h4>
<div class="paragraph">
<p>It would be convenient for debt collectors to have their debtors' debts updated automatically.
However, it should be noted that it is still a basic feature as it only accrues a debtor&#8217;s debt at the start of each month.
An updated version will be included in V2.0.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-2"><a class="link" href="#implementation-2">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="interest-calculator-mechanism"><a class="link" href="#interest-calculator-mechanism">Interest Calculator Mechanism</a></h3>
<div class="paragraph">
<p>As a debt collector, it can be troublesome to manage so many debts. The task is made more tedious when the debt collector has to
consider all the debtor&#8217;s loan&#8217;s interest rates as well. Codii is able to automatically calculate a <code>Person</code> 's new debt based on his / her&#8217;s
interest rate. Whenever the user logs into Codii, the <code>Model</code> component, which handles the event <code>LoginAppRequestEvent</code> and checks every
<code>Person</code> in the <code>AddressBook</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Subscribe</span>
    <span class="directive">public</span> <span class="type">void</span> handleLoginUpdateDebt(LoginAppRequestEvent event) {
        <span class="comment">// login is successful</span>
        <span class="keyword">if</span> (event.getLoginStatus() == <span class="predefined-constant">true</span>) {
            <span class="keyword">for</span> (ReadOnlyPerson person : allPersons) {
                <span class="keyword">if</span> (!person.getInterest().value.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">No interest set.</span><span class="delimiter">&quot;</span></span>)
                        &amp;&amp; (person.checkLastAccruedDate(<span class="keyword">new</span> <span class="predefined-type">Date</span>()) != <span class="integer">0</span>)) {
                    updateDebtFromInterest(person, person.checkLastAccruedDate(<span class="keyword">new</span> <span class="predefined-type">Date</span>()));
                }
            }
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>As seen from the above if a <code>Person</code> has his / her interest field defined,the event handler checks a <code>Person</code> 's debts last accrued date via the method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="comment">/**
     * Compares date of last accrued against current date.
     * @return number of months the current date is ahead of last accrued date. Returns 0 if
     * there is no need to increment debt.
     */</span>
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">int</span> checkLastAccruedDate(<span class="predefined-type">Date</span> currentDate) {
        <span class="keyword">if</span> (lastAccruedDate.before(currentDate)) {
            <span class="keyword">return</span> DateUtil.getNumberOfMonthBetweenDates(currentDate, lastAccruedDate);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> <span class="integer">0</span>;
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above method returns the difference in the number of months between the last accrued date and the current date to the event handler. The event
handler than calls another method to update the <code>Person</code> 's debt by passing in the number of months as a parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> updateDebtFromInterest(ReadOnlyPerson person, <span class="type">int</span> differenceInMonths) {
        <span class="predefined-type">String</span> accruedAmount = person.calcAccruedAmount(differenceInMonths);
        <span class="keyword">try</span> {
            Debt amount = <span class="keyword">new</span> Debt(accruedAmount);
            addDebtToPerson(person, amount);
        } <span class="keyword">catch</span> (PersonNotFoundException pnfe) {
            <span class="keyword">assert</span> <span class="predefined-constant">false</span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Should not occur as person obtained from allPersons</span><span class="delimiter">&quot;</span></span>;
        } <span class="keyword">catch</span> (IllegalValueException ive) {
            <span class="keyword">assert</span> <span class="predefined-constant">false</span> : Debt.MESSAGE_DEBT_CONSTRAINTS;
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>From the above code, the <code>Person</code> 's debts accrued amount would be calculated by the line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> accruedAmount = person.calcAccruedAmount(differenceInMonths);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Their respective debts would then be updated accordingly with the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">addDebtToPerson(person, amount);</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> When to update / check a Person&#8217;s debt<br>
<strong>Alternative 1 (Current choice):</strong> Check through the <code>AddressBook</code> in the <code>Model</code> component every time the user logs in<br>
<strong>Pros:</strong> Convenient and intuitive to implement for developer.<br>
<strong>Cons:</strong> If user never logs out, the debt would not be accrued.<br>
<strong>Alternative 2:</strong> Create a <code>Refresh</code> command that does the checking instead of relying on the <code>LoginAppRequestEvent</code><br>
<strong>Pros:</strong> User can have the most up-to-date debt as long as he / she remembers to always enter the <code>Refresh</code> command.<br>
<strong>Cons:</strong> Not convenient for user at all. It is also unlikely that the user would remain logged in for such a long duration.<br></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="other-contributions"><a class="link" href="#other-contributions">other contributions</a></h3>
<div class="sect3">
<h4 id="added-various-fields-to-the-person-class"><a class="link" href="#added-various-fields-to-the-person-class">Added various fields to the Person Class</a></h4>
<div class="ulist">
<ul>
<li>
<p>Debt field</p>
</li>
<li>
<p>Interest field</p>
</li>
<li>
<p>Date Borrow field</p>
</li>
<li>
<p>Deadline field</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-13 15:13:02 +00:00
</div>
</div>
</body>
</html>