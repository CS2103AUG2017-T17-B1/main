<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Khoo Wei Ping - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Khoo Wei Ping - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-codii"><a class="link" href="#project-codii">Project: Codii</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>[<a href="https://github.com/CS2103AUG2017-T17-B1/main">Codii</a>] is a desktop address book application specially designed for debt collectors to manage debtors in a simple manner. It has a GUI but most of the user interactions happen using a CLI (Command Line Interface).</p>
</div>
<div class="paragraph">
<p>Debt collectors can store information such as the amount owed, debt borrow date and debt cleared date in addition to debtorâ€™s personal information.</p>
</div>
<div class="paragraph">
<p>Unique features such as an interest calculator help debt collectors manage debts more efficiently.</p>
</div>
<div class="paragraph">
<p>Codii is evolved from [<a href="https://github.com/nus-cs2103-AY1718S1/addressbook-level4">AddressBook - Level 4</a>] which is a desktop address book application used for teaching Software Engineering principles.</p>
</div>
<div class="paragraph">
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103AUG2017-T17-B1/main/tree/master/collated/main/khooroko.md">Functional code</a>] [<a href="https://github.com/CS2103AUG2017-T17-B1/main/tree/master/collated/test/khooroko.md">Test code</a>]</p>
</div>
<div class="sect2">
<h3 id="enhancement-added-storage-backup"><a class="link" href="#enhancement-added-storage-backup">Enhancement Added: Storage backup</a></h3>
<div class="sect3">
<h4 id="external-behavior"><a class="link" href="#external-behavior">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="saving-the-data"><a class="link" href="#saving-the-data">Saving the data</a></h3>
<div class="paragraph">
<p>Address book data are saved in the hard disk automatically after any command that changes the data.<br>
There is no need to save manually.<br>
If address book data can be loaded successfully, backup address book data is saved upon starting the program.</p>
</div>
</div>
<div class="sect2">
<h3 id="loading-the-data"><a class="link" href="#loading-the-data">Loading the data</a></h3>
<div class="paragraph">
<p>If the data file does not exist or cannot be read:</p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>Backup data file will be loaded, if available and readable.</p>
</li>
<li>
<p>If backup data is unavailable:</p>
<div class="ulist none">
<ul class="none">
<li>
<p>You will be given a sample address book.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If backup data exists but cannot be read :</p>
<div class="ulist none">
<ul class="none">
<li>
<p>You will be given an empty address book.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To quickly revert address book data to the state of last use:</p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>1. Delete addressbook.xml.</p>
</li>
<li>
<p>2. Rename addressbook.xml-backup.xml to addressbook.xml.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification"><a class="link" href="#justification">Justification</a></h4>
<div class="paragraph">
<p>The backup is a safety measure in case the main storage file is corrupted or deleted by accident.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="backup-storage-mechanism"><a class="link" href="#backup-storage-mechanism">Backup storage mechanism</a></h3>
<div class="paragraph">
<p>The backup storage mechanism is facilitated by the <code>StorageManager</code>. It backs up the address book data automatically each time the application starts up, if there is existing data available. The backup file is saved in the same location as the main file as <code>addressbook.xml-backup.xml</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/BackupAddressBookSequenceDiagram.png" alt="BackupAddressBookSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.3.1: Sequence diagram for backing up address book data</em></p>
</div>
<div class="paragraph">
<p>The <code>backupAddressBook</code> method is called in <code>MainApp#init()</code> which is called each time the application starts. The sequence diagram for this method is shown above in Figure 3.3.1. No backup is made if there is no existing data.</p>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> When to create the backup<br>
<strong>Alternative 1 (current choice):</strong> on startup of the application<br>
<strong>Pros:</strong> Guarantees that a backup is made only of a working version of the address book that the user can easily revert to, should he/she mess up the main copy while using the application.<br>
<strong>Cons:</strong> If the user tends to make many changes within one session, none of the changes are saved in the backup.
<strong>Alternative 2:</strong> Implement a command to create backup.<br>
<strong>Pros:</strong> The backup is only created when the user desires to.<br>
<strong>Cons:</strong> This makes the implementation pointless altogether as it is meant as a safety net for clumsy users. This alternative would only benefit the careful users, who do not require it as much in the first place.<br>
<strong>Alternative 3:</strong> Create a backup after a fixed number of commands that change the address book.<br>
<strong>Pros:</strong> This will create backups that are guaranteed to be recent.<br>
<strong>Cons:</strong> It is difficult to determine the ideal number of commands to ensure that the backup is both recent enough, yet outdated enough for the user to want to restore state to should he/she mess up a command at some point.<br></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-sort-command"><a class="link" href="#enhancement-added-sort-command">Enhancement Added: Sort command</a></h3>
<div class="sect3">
<h4 id="external-behavior-2"><a class="link" href="#external-behavior-2">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sorting-all-contacts-code-sort-code"><a class="link" href="#sorting-all-contacts-code-sort-code">Sorting all contacts : <code>sort</code></a></h3>
<div class="paragraph">
<p>Sorts all the contacts in the address book in specified order. If no order is specified, the contacts are sorted in ascending lexographical order.<br>
Format: <code>sort [ORDERING]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Valid orderings are: <code>name</code>, <code>cluster</code>, <code>deadline</code> and <code>debt</code>.</p>
</li>
<li>
<p>If no ordering is specified, the address book will be sorted by name.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sort</code><br>
Sorts the contacts in the address book by name.</p>
</li>
<li>
<p><code>sort cluster</code><br>
Sorts the contacts in the address book by their postal districts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification-2"><a class="link" href="#justification-2">Justification</a></h4>
<div class="paragraph">
<p>Debt collectors would want to sort their contacts in various ways for easier viewing.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-2"><a class="link" href="#implementation-2">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sorting-mechanism"><a class="link" href="#sorting-mechanism">Sorting mechanism</a></h3>
<div class="paragraph">
<p>Sorting is done within the <code>UniquePersonList</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> sortBy(<span class="predefined-type">String</span> order) <span class="directive">throws</span> <span class="exception">IllegalArgumentException</span> {
    <span class="keyword">switch</span> (order) {
    <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:
        internalList.sort((Person p1, Person p2) -&gt; p1.getName().compareTo(p2.getName()));
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">debt</span><span class="delimiter">&quot;</span></span>:
        internalList.sort((Person p1, Person p2) -&gt; p2.getDebt().compareTo(p1.getDebt()));
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">cluster</span><span class="delimiter">&quot;</span></span>:
        internalList.sort((Person p1, Person p2) -&gt; p1.getCluster().compareTo(p2.getCluster()));
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">deadline</span><span class="delimiter">&quot;</span></span>:
        internalList.sort((Person p1, Person p2) -&gt; p1.getDeadline().compareTo(p2.getDeadline()));
        internalList.sort((Person p1, Person p2) -&gt; <span class="predefined-type">Boolean</span>.compare(p1.isWhitelisted(), p2.isWhitelisted()));
        <span class="keyword">break</span>;
    <span class="keyword">default</span>:
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalArgumentException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid sort ordering</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>sort</code> command can take in a <code>String</code> that determines how the contacts should be sorted. If no ordering is
specified, the contacts will be sorted by ascending lexicographical order by default.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">SortCommandParser</span> <span class="directive">implements</span> <span class="predefined-type">Parser</span>&lt;SortCommand&gt; {
    <span class="directive">public</span> SortCommand parse(<span class="predefined-type">String</span> args) <span class="directive">throws</span> <span class="exception">ParseException</span> {
        requireNonNull(args);
        <span class="predefined-type">String</span> trimmedArgs = args.trim().toLowerCase();
        <span class="keyword">switch</span> (trimmedArgs) {
        <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>:
        <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:
        <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">debt</span><span class="delimiter">&quot;</span></span>:
        <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">cluster</span><span class="delimiter">&quot;</span></span>:
        <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">deadline</span><span class="delimiter">&quot;</span></span>:
            <span class="keyword">return</span> <span class="keyword">new</span> SortCommand(trimmedArgs);
        <span class="keyword">default</span>:
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(<span class="predefined-type">String</span>.format(MESSAGE_INVALID_COMMAND_FORMAT, SortCommand.MESSAGE_USAGE));
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> DEFAULT_ORDERING = <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>;

<span class="directive">public</span> SortCommand(<span class="predefined-type">String</span> order) {
    <span class="comment">//validity of order to sort is checked in {@code SortCommandParser}</span>
    <span class="keyword">if</span> (order.equals(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)) {
        order = DEFAULT_ORDERING;
    }
    <span class="local-variable">this</span>.order = order;
}

<span class="directive">public</span> CommandResult execute() <span class="directive">throws</span> CommandException {
    <span class="keyword">try</span> {
        model.sortBy(order);
    } <span class="comment">// irrelevant parts of the method omitted for brevity</span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Default <code>sort</code><br>
<strong>Alternative 1 (current choice):</strong> <code>Sort</code> by <code>name</code> by default<br>
<strong>Pros:</strong> Relatively easy to implement, extremely intuitive.<br>
<strong>Alternative 2:</strong> <code>Sort</code> by <code>debt</code> by default<br>
<strong>Pros:</strong> Equally easy to implement.<br>
<strong>Cons:</strong> Slightly less intuitive as sorting by <code>name</code> is the most prevalent way of sorting contacts.<br>
<strong>Alternative 3:</strong> No default <code>sort</code>.<br>
<strong>Pros:</strong> Extremely easy to implement.<br>
<strong>Cons:</strong> Not user-friendly.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-cluster-field"><a class="link" href="#enhancement-added-cluster-field">Enhancement Added: Cluster field</a></h3>
<div class="sect3">
<h4 id="external-behaviour"><a class="link" href="#external-behaviour">External behaviour</a></h4>
<div class="paragraph">
<p><code>Clusters</code> are generated based on based on [<a href="https://www.ura.gov.sg/realEstateIIWeb/resources/misc/list_of_postal_districts.htm">postal districts</a>].</p>
</div>
</div>
<div class="sect3">
<h4 id="justification-3"><a class="link" href="#justification-3">Justification</a></h4>
<div class="paragraph">
<p>An easy way to group contacts is needed for a debt collector to better plan his/her trips.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-3"><a class="link" href="#implementation-3">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="cluster-mechanism"><a class="link" href="#cluster-mechanism">Cluster mechanism</a></h3>
<div class="paragraph">
<p>As a debt collector that operates in all parts of Singapore, it would boost efficiency in deciding debt collection trips
if the contacts can be effectively grouped by <a href="cluster">clusters</a>. It is determined based on the postal code provided
upon adding a <code>Person</code> into the address book. This can be seen in the constructors of the <code>Person</code> class and the
<code>Cluster</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Person(<span class="predefined-type">Name</span> name, Phone phone, Email email, Address address, PostalCode postalCode,
              Debt debt, Interest interest, Deadline deadline, <span class="predefined-type">Set</span>&lt;Tag&gt; tags) {
    requireAllNonNull(name, phone, email, address, postalCode, debt, interest, deadline, tags);
    <span class="comment">// assignment of other fields omitted for brevity</span>
    <span class="local-variable">this</span>.cluster = <span class="keyword">new</span> SimpleObjectProperty&lt;&gt;(<span class="keyword">new</span> Cluster(postalCode));
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Cluster(PostalCode postalCode) {
    requireNonNull(postalCode);
    <span class="keyword">if</span> (!isValidPostalCode(postalCode.toString())) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">AssertionError</span>(MESSAGE_POSTAL_CODE_CONSTRAINTS);
    }
    <span class="predefined-type">String</span> cluster = getCluster(postalCode.toString());
    clusterNumber = <span class="predefined-type">Integer</span>.parseInt(cluster.substring(<span class="integer">0</span>, <span class="integer">2</span>));
    <span class="local-variable">this</span>.value = cluster.substring(<span class="integer">4</span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getCluster</code> method resides in the <code>ClusterUtil</code> class, and returns the name of the postal district based on the
first two numbers of the postal code that is passed into the method. The postal districts are retrieved from [<a href="https://www.ura.gov.sg/realEstateIIWeb/resources/misc/list_of_postal_districts.htm">URA</a>].
The district number is stored as part of the <code>String</code> for ease of sorting by location.
Part of the code from <code>ClusterUtil</code> for retrieving the <code>cluster</code> from a postal code starting with <code>01</code> is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ClusterUtil</span> {

    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> CLUSTER_POSTAL_DISTRICT_01 = <span class="string"><span class="delimiter">&quot;</span><span class="content">01. Raffles Place, Cecil, Marina, People's Park</span><span class="delimiter">&quot;</span></span>;
    <span class="comment">// declaration of other postal districts omitted for brevity</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> CLUSTER_POSTAL_DISTRICT_UNKNOWN = <span class="string"><span class="delimiter">&quot;</span><span class="content">99. Unknown</span><span class="delimiter">&quot;</span></span>;

    <span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">String</span> getCluster(<span class="predefined-type">String</span> postalCode) {
        requireNonNull(postalCode);
        <span class="type">int</span> postalSector = <span class="predefined-type">Integer</span>.parseInt(postalCode.substring(<span class="integer">0</span>, <span class="integer">2</span>));
        <span class="keyword">switch</span> (postalSector) {
        <span class="keyword">case</span> <span class="integer">1</span>:
        <span class="keyword">case</span> <span class="integer">2</span>:
        <span class="keyword">case</span> <span class="integer">3</span>:
        <span class="keyword">case</span> <span class="integer">4</span>:
        <span class="keyword">case</span> <span class="integer">5</span>:
        <span class="keyword">case</span> <span class="integer">6</span>:
            <span class="keyword">return</span> CLUSTER_POSTAL_DISTRICT_01;
        <span class="comment">// cases for all other valid postal districts omitted for brevity</span>
        <span class="keyword">default</span>:
            <span class="keyword">return</span> CLUSTER_POSTAL_DISTRICT_UNKNOWN;
        }
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-3"><a class="link" href="#design-considerations-3">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Grouping of contacts.<br>
<strong>Alternative 1 (current choice):</strong> Create a field that contains the name and district number of the postal districts, based on postal code.<br>
<strong>Pros:</strong> Easy to implement and extend, requires minimal user input.<br>
<strong>Cons:</strong> Requires developer to update <code>ClusterUtil</code> whenever a new postal district is drawn by the government, and
requires users to reset their contacts' <code>cluster</code> via deletion and addition or via editing their <code>postal codes</code>.<br>
<strong>Alternative 2:</strong> Import contacts' location and find their proximity from one another using Google Maps API.<br>
<strong>Pros:</strong> Higher precision of geographical location and proximity.<br>
<strong>Cons:</strong> Tedious to implement proximity. Either takes up too much time in generating nearby contacts or too much space
 in storing them.<br>
<strong>Alternative 3:</strong> Assign general location to each contact upon addition into the address book or via editing.<br>
<strong>Pros:</strong> Easy to implement.<br>
<strong>Cons:</strong> Tedious for users. They also have to ensure that they do not make spelling mistakes.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-nearby-command"><a class="link" href="#enhancement-added-nearby-command">Enhancement Added: Nearby command</a></h3>
<div class="sect3">
<h4 id="external-behavior-3"><a class="link" href="#external-behavior-3">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="selecting-a-nearby-person-code-nearby-code"><a class="link" href="#selecting-a-nearby-person-code-nearby-code">Selecting a nearby person: <code>nearby</code></a></h3>
<div class="paragraph">
<p>Selects the person identified by the index number used in the listing of nearby contacts of currently selected person,<br>
Format: <code>nearby [INDEX]</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you do not see a secondary person list panel labelled "All contacts in this area" at the bottom of the information
of the currently selected contact, you might need to change your resolution settings to view it.<br>
On Windows, go to Settings &#8594; Display &#8594; Set "Change the size of text, apps and other items" to 125%, then restart the
app.
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>A person must be selected before this command is called.</p>
</li>
<li>
<p>Selects the person and loads the full information of the person at the specified <code>INDEX</code>.</p>
</li>
<li>
<p>The index refers to the index number shown in the nearby contacts listing.</p>
</li>
<li>
<p>The index <strong>must be a positice integer</strong> <code>1, 2, 3, &#8230;&#8203;</code></p>
</li>
<li>
<p>If no index is specified, the next person in the nearby contacts listing is selected instead.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>list</code><br>
<code>select 2</code><br></p>
</li>
<li>
<p><code>nearby 1</code><br>
Selects the 1st person in the same <code>cluster</code> as the previously selected person.</p>
</li>
<li>
<p><code>nearby</code><br>
Selects the next person in the same <code>cluster</code> as the previously selected person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification-4"><a class="link" href="#justification-4">Justification</a></h4>
<div class="paragraph">
<p>Debt collectors may want to see details of nearby contacts to plan a more effective visiting schedule</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-making-index-optional-for-commands"><a class="link" href="#enhancement-added-making-index-optional-for-commands">Enhancement Added: Making index optional for commands</a></h3>
<div class="sect3">
<h4 id="external-behavior-4"><a class="link" href="#external-behavior-4">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide] written by Jelena Neo Hui Ling</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="increasing-the-debt-of-a-debtor-code-borrow-code"><a class="link" href="#increasing-the-debt-of-a-debtor-code-borrow-code">Increasing the debt of a debtor: <code>borrow</code></a></h3>
<div class="paragraph">
<p>Increase the debt of a debtor by the amount entered.<br>
Format: <code>borrow [INDEX] AMOUNT</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Increases the debt of the debtor at the specified <code>INDEX</code> by <code>AMOUNT</code>. The index refers to the index number shown in the last person listing. The index <strong>must be a positive integer</strong> 1, 2, 3, &#8230;&#8203;</p>
</li>
<li>
<p>If no index is specified, the debt of the currently selected person is increased instead.</p>
</li>
<li>
<p><code>AMOUNT</code> has to be in dollars and cents. For example: <code>500.50</code> which represents $500.50.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>borrow 1 500</code><br>
Increases the debt of the 1st person by $500.</p>
</li>
<li>
<p><code>borrow 2 1000.10</code><br>
Increases the debt of the 2nd person by $1000.10.</p>
</li>
<li>
<p><code>list</code><br>
<code>select 2</code><br>
<code>borrow 234</code><br>
Increases the debt of the 2nd person by $234.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification-5"><a class="link" href="#justification-5">Justification</a></h4>
<div class="paragraph">
<p>Calling commands directly on the currently selected person makes much more intuitive sense than always supplying an
<code>INDEX</code> each time. This also increases the flexibility and convenience of Codii.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-4"><a class="link" href="#implementation-4">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="optional-command-indexes"><a class="link" href="#optional-command-indexes">Optional command indexes</a></h3>
<div class="paragraph">
<p>It is intuitive to allow commands such as <code>edit</code>, <code>delete</code>, <code>borrow</code> and others to be called on the currently selected
person instead of always having to supply the <code>INDEX</code>.<br>
Parsers of commands call a constructor of the commands without an index. Take the <code>RepaidCommandParser</code> and <code>RepaidCommand</code> for example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> RepaidCommand parse(<span class="predefined-type">String</span> args) <span class="directive">throws</span> <span class="exception">ParseException</span> {
    <span class="keyword">try</span> {
        <span class="keyword">if</span> (args.trim().equals(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)) {
            <span class="keyword">return</span> <span class="keyword">new</span> RepaidCommand();
        } <span class="keyword">else</span> {
            Index index = ParserUtil.parseIndex(args);
            <span class="keyword">return</span> <span class="keyword">new</span> RepaidCommand(index);
        }
    } <span class="keyword">catch</span> (IllegalValueException ive) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(
            <span class="predefined-type">String</span>.format(MESSAGE_INVALID_COMMAND_FORMAT, RepaidCommand.MESSAGE_USAGE));
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> RepaidCommand() {
    <span class="local-variable">this</span>.targetIndex = <span class="predefined-constant">null</span>;
}
<span class="directive">public</span> CommandResult executeUndoableCommand() <span class="directive">throws</span> CommandException {
    ReadOnlyPerson personToWhitelist = selectPerson(targetIndex);
    <span class="comment">// Perform the command operation as per normal.</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>selectPerson(Index)</code> method is placed in the <code>Command</code> class, and is used by such index-based commands to select
the currently selected person to apply the command on if no index is provided.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> ReadOnlyPerson selectPerson(Index index) <span class="directive">throws</span> CommandException {
    ReadOnlyPerson selectedPerson;
    <span class="keyword">if</span> (index == <span class="predefined-constant">null</span>) {
        <span class="keyword">if</span> (model.getSelectedPerson() == <span class="predefined-constant">null</span>) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(Messages.MESSAGE_NO_PERSON_SELECTED);
        } <span class="keyword">else</span> {
            selectedPerson = model.getSelectedPerson();
        }
    } <span class="keyword">else</span> {
        <span class="predefined-type">List</span>&lt;ReadOnlyPerson&gt; lastShownList = listObserver.getCurrentFilteredList();

        <span class="keyword">if</span> (index.getZeroBased() &gt;= lastShownList.size()) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(Messages.MESSAGE_INVALID_PERSON_DISPLAYED_INDEX);
        }
        selectedPerson = lastShownList.get(index.getZeroBased());
    }
    <span class="keyword">return</span> selectedPerson;
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-4"><a class="link" href="#design-considerations-4">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Executing index-based commands without index.<br>
<strong>Alternative 1 (current choice):</strong> Calling a constructor of the <code>command</code> without an <code>Index</code> initialises its <code>targetIndex</code>
to null, and the null index is handled as a special value during execution.<br>
<strong>Pros:</strong> Easy to implement, easy to extend.<br>
<strong>Cons:</strong> Although highly unlikely, it may be possible for a <code>command</code> to have an unintended null <code>targetIndex</code>, which
will then cause it to behave as an indexless command instead of an error.<br>
<strong>Alternative 2:</strong> Find and use the current selection index within the constructor with no parameters.<br>
<strong>Pros:</strong> Easier to maintain and test.<br>
<strong>Cons:</strong> Difficult to implement as the <code>model</code> of a <code>command</code> is only set during execution, so it will be hard or even
impossible to retrieve the current selection in the constructor of a <code>command</code>.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="other-contributions"><a class="link" href="#other-contributions">Other contributions</a></h3>
<div class="sect3">
<h4 id="various-ui-enhancements"><a class="link" href="#various-ui-enhancements">Various UI enhancements</a></h4>
<div class="ulist">
<ul>
<li>
<p>Adding a display for current list and selected index (Pull request <a href="https://github.com/CS2103AUG2017-T17-B1/main/pull/249">#249</a>)</p>
</li>
<li>
<p>Replacing the browser with full information panel (Pull request <a href="https://github.com/CS2103AUG2017-T17-B1/main/pull/48">#48</a>)</p>
</li>
<li>
<p>Creating the nearby persons panel inside the full information panel (Pull request <a href="https://github.com/CS2103AUG2017-T17-B1/main/pull/128">#128</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="miscellaneous"><a class="link" href="#miscellaneous">Miscellaneous</a></h4>
<div class="ulist">
<ul>
<li>
<p>Assist teammates with debugging tests</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-dog-mario"><a class="link" href="#project-dog-mario">Project: Dog Mario</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>[<a href="https://github.com/DogMario/Dog-Mario">Dog Mario</a>] is a game developed with [<a href="https://github.com/tbhbhbh">Tan Bing Hwang</a>] as an independent project for Orbital 2017.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-09 08:38:05 +00:00
</div>
</div>
</body>
</html>